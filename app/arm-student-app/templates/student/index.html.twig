{% extends 'base.html.twig' %}
{% set page_title = 'Студенты' %}
{% set sub_page_title = 'Список студентов' %}

{% block title %}
    {% if page_title is defined %} {{ page_title }} {% endif %}
{% endblock %}

{% block body %}
    <div class="block block-rounded block-bordered block-themed">
        <div class="block-header block-header-default bg-secondary">
            <h3 class="block-title">Студенты <small></small></h3>
            <div class="block-options">
                <div class="dropdown">
                    <button type="button" class="btn btn-outline-light dropdown-toggle"
                            id="dropdown-default-primary"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa-regular fa-plus"></i> <span>Добавить</span>
                    </button>
                    <div class="dropdown-menu fs-sm" aria-labelledby="dropdown-default-primary">
                        <a class="dropdown-item" href="{{ path('app_student_new') }}">Добавить студента</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{{ path('app_student_import') }}">Импортировать студентов</a>
                    </div>
                </div>

            </div>
        </div>
        <div class="block-content">
            <table class="table table-bordered table-striped table-vcenter js-dataTable-responsive">
                <thead class="table-secondary">
                <tr>
                    <th>№<br> п/п</th>
                    <th>Фамилия Имя Отчество</th>
                    <th class="d-none d-xl-table-cell">Специальность</th>
                    <th class="d-none d-xl-table-cell">Группа</th>
                    <th class="d-none d-xl-table-cell">Номер зачётки/<br>Номер студ. билета</th>
                    <th class="d-none d-xl-table-cell">Email</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody>
                {% set iterator = 0 %}
                {% for student in students %}
                    {% set iterator = iterator + 1 %}
                    <tr>
                        <td>{{ iterator }}</td>
                        <td>
                            <div class="row  align-items-center">
                                <div class="col-12  {% if(student.IsInvalid or student.IsOrphan or student.IsPoor or student.IsPaid) %}col-md-9{% endif %} ">{{ student.LastName }} {{ student.FirstName }} {{ student.MiddleName }}</div>
                                {% if(student.IsInvalid or student.IsOrphan or student.IsPoor or student.IsPaid) %}
                                    <div class="col-12 col-md-3 small">
                                        <div class="row">

                                            {% if(student.IsInvalid) %}
                                                <span class="badge bg-info col-2 col-md-3">И</span>
                                            {% endif %}

                                            {% if(student.IsPoor) %}
                                                <span class="badge  bg-secondary  col-2 col-md-3">М</span>
                                            {% endif %}

                                            {% if(student.IsOrphan) %}
                                                <span class="badge bg-danger  col-2 col-md-3">С</span>
                                            {% endif %}
                                            {% if(student.IsPaid) %}
                                                <span class="badge bg-warning  col-2 col-md-3">П</span>
                                            {% endif %}  </div>
                                    </div>
                                {% endif %}
                            </div>

                        </td>
                        <td class="d-none d-xl-table-cell">
                            <small>{{ student.studentGroup.faculty.specialization.code~" "~student.studentGroup.faculty.specialization.name }}</small>
                        </td>
                        <td class="d-none d-xl-table-cell">{{ student.studentGroup.name }}</td>
                        <td class="d-none d-xl-table-cell">{{ student.NumberZachetka }}
                            / {{ student.NumberStudBilet }}</td>
                        <td class="d-none d-sm-table-cell">{{ student.email }}</td>

                        <td>
                            <div class="btn-group">
                                <a class="btn btn-sm btn-alt-secondary js-bs-tooltip-enabled"
                                   href="{{ path('app_student_show', {'id': student.id}) }}"> <i
                                            class="far fa-fw  fa-file-user"></i></a>
                                <a class="btn btn-sm btn-alt-secondary js-bs-tooltip-enabled"
                                   href="{{ path('app_student_edit', {'id': student.id}) }}"><i
                                            class="fa fa-fw fa-pencil-alt"></i></a>
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="14">Записи отсутствуют</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

{% endblock %}
